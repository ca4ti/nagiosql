<!-- (c) 2005-2011 by Martin Willisegger -->
<!-- -->
<!-- Project    : NagiosQL -->
<!-- Component  : Group template -->
<!-- Website    : http://www.nagiosql.org -->
<!-- Date       : $LastChangedDate: 2011-03-13 14:00:26 +0100 (So, 13. MÃ¤r 2011) $ -->
<!-- Author     : $LastChangedBy: rouven $ -->
<!-- Version    : 3.1.1 -->
<!-- Revision   : $LastChangedRevision: 1058 $ -->
<!-- BEGIN header -->
<td class="main">
	<h1>{TITLE}</h1>
<!-- END header -->
<!-- BEGIN datainsert -->
	<script language="JavaScript" type="text/JavaScript">
		<!--
		// Interrupt input
    	function abort() {
      		this.location.href = "{ACTION_INSERT}?limit={LIMIT}";
    	}
    	// Send form
    	function LockButton() {
      		if (checkForm() == false) {
        		return false;
      		} else {
				document.getElementById("selUsers").disabled = false;
        		document.frmGroupInsert.submit();
        		document.frmGroupInsert.subForm.disabled = true;
      		}
    	}
    	// Check form entries
		function checkForm() {
      		// Are all required fields filled in?
	  		var fields1 = "tfGroupname,tfDescription";
	  		var msg1    = "{FILL_ALLFIELDS}";
	  		var msg2    = "{FILL_ILLEGALCHARS}";
	  		var header  = "{LANG_FORMCHECK}";
	  		var form    = document.frmGroupInsert;
	 		 var check   = false;
	  		check = checkfields(fields1,form,myFocusObject);
	  		if (check == false) {
	  			msginit(msg1,header,1);
				return false;
	  		}	
			// Check for illegal chars
	  		if (form.tfGroupname.value.match(/[^\w\.-]/)) {
	  			msginit(msg2+" {LANG_GROUPNAME}",header,1);
	  			form.tfGroupname.focus()
				return false;
	  		}
		}
		// Insert group user
		function insertGroupUser() {
			var txtUser 	 = document.frmGroupInsert.selUsers.value;
			var txtRights    = "";
			if (document.frmGroupInsert.chbRead.checked == true) {
				txtRights=txtRights+"1-";
			} else {
				txtRights=txtRights+"0-";
			}
			if (document.frmGroupInsert.chbWrite.checked == true) {
				txtRights=txtRights+"1-";
			} else {
				txtRights=txtRights+"0-";
			}
			if (document.frmGroupInsert.chbLink.checked == true) {
				txtRights=txtRights+"1";
			} else {
				txtRights=txtRights+"0";
			}
			if (txtUser == "") {
				var header  = "{LANG_FORMCHECK}";
				msginit("{LANG_INSERT_ALL_VARIABLE}",header,1);
				return false;
			}
			document.getElementById("variableframe").src = "{BASE_PATH}admin/groupusers.php?dataId={DAT_ID}&version={VERSION}&mode=add&user="+txtUser+"&rights="+txtRights;
		}
    	//-->
  	</script>
  	<form name="frmGroupInsert" method="post" action="{ACTION_INSERT}">
 		 <table border="0"  class="inserttable">
            <tr>
                <td>{LANG_GROUPNAME}*</td>
                <td><input name="tfGroupname" type="text" id="tfGroupname" tabindex="1" value="{DAT_GROUPNAME}" {NAME_DISABLE} style="width:150px" class="inpmust" ><input name="hidGroupname" type="hidden" id="hidGroupname" value="{DAT_GROUPNAME}"></td>
            </tr>
            <tr>
                <td>{LANG_DESCRIPTION}*</td>
                <td><input name="tfDescription" type="text" id="tfDescription" tabindex="2" value="{DAT_DESCRIPTION}" size="40"  style="width:350px" class="inpmust" ></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td colspan="2" style="padding-bottom:5px"><b>{LANG_USER_DEFINITIONS}</b></td>
            </tr>
            <tr>
                <td colspan="2" style="padding-bottom:2px">
                    <table cellpadding="0" cellspacing="0" border="0">
                        <tr>
                            <td width="235" style="padding-left:5px"><i>{LANG_USER_NAME}</i></td>
                            <td width="260"><i>{LANG_USER_RIGHTS}</i></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="padding-bottom:10px"><iframe id="variableframe" frameborder="0" src="{BASE_PATH}admin/groupusers.php?dataId={DAT_ID}&amp;linktab=tbl_lnkGroupToUser" width="540" height="150" style="border:1px solid #000000"></iframe></td>
            </tr>
            <tr>
                <td colspan="2">
                    <table cellpadding="0" cellspacing="1" border="0"  class="inserttable">
                        <tr>
                            <td width="152">{LANG_USER_NAME}</td>
                            <td width="300">
            					<select name="selUsers" id="selUsers" style="width:250px;" class="inp">
<!-- BEGIN users -->
									<option value="{DAT_USER_ID}" class="inp">{DAT_USER}</option>
<!-- END users -->
            					</select><!--&nbsp;<img src="{IMAGE_PATH}tip.gif" alt="{LANG_HELP}" title="{LANG_HELP}" width="18" height="18" onclick="dialoginit('users','username','all','Info')" style="vertical-align:text-bottom; padding-bottom:2px!" >--></td>
            				<td>&nbsp;</td>
            			</tr>
          				<tr>
                            <td>{LANG_USER_RIGHTS}</td>
                            <td>
                                <table cellpadding="0" cellspacing="0" border="0">
                                    <tr>
                                        <td style="width:20px"><input type="checkbox" name="chbRead" id="chbRead" value="1" {CHB_READ_SEL} /></td>
                                        <td style="width:48px">{LANG_READ}&nbsp;&nbsp;&nbsp;</td>
                                        <td style="width:20px"><input type="checkbox" name="chbWrite" id="chbWrite" value="1" {CHB_WRITE_SEL} /></td>
                                        <td style="width:48px">{LANG_WRITE}&nbsp;&nbsp;&nbsp;</td>
                                        <td style="width:20px"><input type="checkbox" name="chbLink" id="chbLink" value="1" {CHB_LINK_SEL} /></td>
                                        <td style="width:48px">{LANG_LINK}&nbsp;&nbsp;&nbsp;</td>
                                        <td style="width:20px"><!--<input type="checkbox" name="chbRes" id="chbRes" value="1" {CHB_READ_SEL} />--></td>
                                        <td style="width:48px">&nbsp;&nbsp;&nbsp;</td>
                                        <td style="width:54px"><img src="{IMAGE_PATH}tip.gif" alt="{LANG_HELP}" title="{LANG_HELP}" width="18" height="18" onclick="dialoginit('group','userrights','all','Info')" style="vertical-align:text-bottom; padding-bottom:2px!" ></td>
                                    </tr>
                              	</table>
                        	</td>
                        	<td><input type="button" name="butVariableDefinition" value="{LANG_INSERT}" onClick="insertGroupUser()"></td>
                  		</tr>
            		</table>
            	</td>
      		</tr>
            <tr>
                <td width="150">&nbsp;</td>
                <td width="590">&nbsp;</td>
            </tr>
            <tr>
                <td>{LANG_ACTIVE}</td>
                <td colspan="2"><input name="chbActive" type="checkbox" class="checkbox" id="chbActive" value="1" {ACT_CHECKED} {ACT_DISABLE}>
                    <input name="modus" type="hidden" id="modus" value="{MODUS}">
                    <input name="hidId" type="hidden" id="hidId" value="{DAT_ID}">
                    <input name="hidLimit" type="hidden" id="hidLimit" value="{LIMIT}">
                </td>
            </tr>
            <tr>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="2"><input name="subForm" type="button" id="subForm" value="{LANG_SAVE}" onClick="LockButton()">
                &nbsp;<input name="subAbort" type="button" id="subAbort" onClick="abort()" value="{LANG_ABORT}">&nbsp;&nbsp;&nbsp;*&nbsp;{LANG_REQUIRED}</td>
            </tr>
            <tr>
                <td colspan="2"  style="padding-top:15px"><span class="dbmessage">{WARNING}</span></td>
            </tr>
		</table>
    </form>
    <br>
    <div id="mutdialoguser">
        <div id="mutdialogusercontent" class="bd"></div>
    </div>
    <div id="msgcontainer"></div>
    <div id="infodialog">
        <div id="dialogcontent" class="bd"></div>
    </div>
<!-- END datainsert -->