<!-- Version 2.0.2 -->
<!-- Last modified 12.03.2007 -->
<!-- BEGIN header -->
    <td class="main">
      <h1>{TITLE}</h1>
<!-- END header -->
<!-- BEGIN datainsert -->
<h2>{TITLE_FORM}</h2>
<form name="frmHostdepcyInsert" method="post" action="{ACTION_INSERT}">
  <script language="JavaScript" type="text/JavaScript">
    <!--
    // Eingabe abbrechen
    function abort() {
      this.location.href = "{ACTION_INSERT}?limit={LIMIT}";
    }
    // Formular absenden
    function LockButton() {
      if (checkForm() == false) {
        return false;
      } else {
        document.frmHostdepcyInsert.submit();
        document.frmHostdepcyInsert.subForm.disabled = true;
      }
    }
    // Formulareingaben überprüfen
    function checkForm() {
	  // Sind Hosts oder Hostgruppen ausgewählt?
      if((document.frmHostdepcyInsert.selHostDepend.value == 0) &&
	     (document.frmHostdepcyInsert.selHost.value == 0) &&
		 (document.frmHostdepcyInsert.selHostgroupDep.value == 0) &&
		 (document.frmHostdepcyInsert.selHostgroup.value == 0)) {
        alert("{FILL_HOST_GR}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }
	  // Sind Hosts und Hostgruppen gleichzeitigausgewählt?
	  if (((document.frmHostdepcyInsert.selHostDepend.value != 0) &&
	    (document.frmHostdepcyInsert.selHostgroupDep.value != 0)) ||
	    ((document.frmHostdepcyInsert.selHost.value != 0) &&
	    (document.frmHostdepcyInsert.selHostgroup.value != 0)) ||
	    ((document.frmHostdepcyInsert.selHost.value != 0) &&
	    (document.frmHostdepcyInsert.selHostgroupDep.value != 0)) ||		
	    ((document.frmHostdepcyInsert.selHostDepend.value != 0) &&
	    (document.frmHostdepcyInsert.selHostgroup.value != 0))) {
        alert("{FILL_HOSTORGR}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }	
	  // Ist ein Hosts zusammen mit einem abhängigen Host ausgewählt?
      if((document.frmHostdepcyInsert.selHostDepend.value == 0) &&
	     (document.frmHostdepcyInsert.selHost.value != 0)) {
        alert("{FILL_DEPHOST}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }		
	  // Ist ein abhängiger Hosts zusammen mit einem Host ausgewählt? 
      if((document.frmHostdepcyInsert.selHostDepend.value != 0) &&
	     (document.frmHostdepcyInsert.selHost.value == 0)) {		 
        alert("{FILL_HOSTS}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }		 
	  // Ist eine Hostgruppe zusammen mit einer abhängigen Hostgruppe ausgewählt?
	  if((document.frmHostdepcyInsert.selHostgroupDep.value == 0) &&
		 (document.frmHostdepcyInsert.selHostgroup.value != 0)) {		 
        alert("{FILL_DEPHOSTGR}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }		
	  // Ist eine abhängige Hostgruppe zusammen mit einer Hostgruppe ausgewählt? 
	  if((document.frmHostdepcyInsert.selHostgroupDep.value != 0) &&
		 (document.frmHostdepcyInsert.selHostgroup.value == 0)) {		 
        alert("{FILL_HOSTGR}");
        document.frmHostdepcyInsert.selHostDepend.focus();
        return false;
      }		  
	  // Ist eine Konfigurationsname erfasst? 
      if(document.frmHostdepcyInsert.tfConfigName.value == "") {
        alert("{FILL_CONFIG}");
        document.frmHostdepcyInsert.tfConfigName.focus();
        return false;	  
	  }
      // Zirkuarbeziehungen testen, soweit möglich
      var strDependHosts = ""
      for(var i=0;i<document.frmHostdepcyInsert.selHostDepend.length;i++) {
        if (document.frmHostdepcyInsert.selHostDepend.options[i].selected == true) {
          if ((document.frmHostdepcyInsert.selHostDepend.options[i].text != 0) &&
		      (document.frmHostdepcyInsert.selHostDepend.options[i].text != "*")) {
		  	strDependHosts += document.frmHostdepcyInsert.selHostDepend.options[i].text+",";
		  }
        }
      }
      for(var i=0;i<document.frmHostdepcyInsert.selHost.length;i++) {
        if (document.frmHostdepcyInsert.selHost.options[i].selected == true) {
		  if (document.frmHostdepcyInsert.selHost.options[i].text != 0) {
            var checkCircHost = strDependHosts.indexOf(document.frmHostdepcyInsert.selHost.options[i].text);
            if(checkCircHost != -1) {
              alert("{FILL_CIRCHOST}");
			  document.frmHostdepcyInsert.selHostDepend.focus();
			  return false;
            }
		  }
        }
      }
      var strDependHostsGroups = ""
      for(var i=0;i<document.frmHostdepcyInsert.selHostgroupDep.length;i++) {
        if (document.frmHostdepcyInsert.selHostgroupDep.options[i].selected == true) {
          if ((document.frmHostdepcyInsert.selHostgroupDep.options[i].text != 0) &&
		      (document.frmHostdepcyInsert.selHostgroupDep.options[i].text != "*")) {
            strDependHostsGroups += document.frmHostdepcyInsert.selHostgroupDep.options[i].text+",";
		  }
        }
      }
      for(var i=0;i<document.frmHostdepcyInsert.selHostgroup.length;i++) {
        if (document.frmHostdepcyInsert.selHostgroup.options[i].selected == true) {
          if (document.frmHostdepcyInsert.selHostgroup.options[i].text != 0) {
		    var checkCircHostGroup = strDependHostsGroups.indexOf(document.frmHostdepcyInsert.selHostgroup.options[i].text);
            if(checkCircHostGroup != -1) {
              alert("{FILL_CIRCHOSTGR}");
			  document.frmHostdepcyInsert.selHostgroupDep.focus();
			  return false;
            }
          }
        }
      }
    }
    //-->
  </script>
  <table border="0" class="inserttable">
    <tr>
      <td>{LANG_DEPENDHOSTS}(*)</td>
      <td colspan="2" rowspan="2"><select name="selHostDepend[]" size="8" multiple id="selHostDepend" style="width:200px;">
<!-- BEGIN hostdepend -->
          <option value="{DAT_HOSTDEPEND_ID}" {DAT_HOSTDEPEND_SEL}>{DAT_HOSTDEPEND}</option>
<!-- END hostdepend -->
        </select></td>
      <td>{LANG_DEPENDHOSTGRS}(*)</td>
      <td rowspan="2"><select name="selHostgroupDep[]" size="8" multiple id="selHostgroupDep" style="width:200px;">
<!-- BEGIN hostgroupdepend -->
          <option value="{DAT_HOSTGROUPDEP_ID}" {DAT_HOSTGROUPDEP_SEL}>{DAT_HOSTGROUPDEP}</option>
<!-- END hostgroupdepend -->
        </select></td>
    </tr>
    <tr>
      <td><small>{LANG_CTRLINFO}</small></td>
      <td><small>{LANG_CTRLINFO}</small></td>
      </tr>
    <tr>
      <td colspan="5"><img src="{IMAGE_PATH}pixel.gif" alt="" width="8" height="8"></td>
      </tr>
    <tr>
      <td>{LANG_HOSTNAMES}(*)</td>
      <td colspan="2" rowspan="2"><select name="selHost[]" size="8" multiple id="selHost" style="width:200px;">
<!-- BEGIN host -->
          <option value="{DAT_HOST_ID}" {DAT_HOST_SEL}>{DAT_HOST}</option>
<!-- END host -->
        </select></td>
      <td>{LANG_HOSTGROUPS}(*)</td>
      <td rowspan="2"><select name="selHostgroup[]" size="8" multiple id="selHostgroup" style="width:200px;">
<!-- BEGIN hostgroup -->
        <option value="{DAT_HOSTGROUP_ID}" {DAT_HOSTGROUP_SEL}>{DAT_HOSTGROUP}</option>
<!-- END hostgroup -->
      </select></td>
    </tr>
    <tr>
      <td><small>{LANG_CTRLINFO}</small></td>
      <td><small>{LANG_CTRLINFO}</small></td>
      </tr>
    <tr>
      <td colspan="5"><img src="{IMAGE_PATH}pixel.gif" alt="" width="8" height="8"></td>
      </tr>
    <tr>
      <td>{LANG_CONFIGNAME}*</td>
      <td colspan="2"><input name="tfConfigName" type="text" id="tfConfigName" value="{DAT_CONFIG_NAME}" maxlength="40"></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>{LANG_INHERIT}</td>
      <td colspan="2"><input type="checkbox" name="chbInherit" class="checkbox" value="1" {ACT_INHERIT}></td>
      <td>{LANG_EXECFAILCRIT}</td>
      <td><input type="checkbox" name="chbEOo" class="checkbox" value="o" {DAT_EOO_CHECKED}>
        o&nbsp;
        <input type="checkbox" name="chbEOd" class="checkbox" value="d" {DAT_EOD_CHECKED}>
        d&nbsp;
        <input type="checkbox" name="chbEOu" class="checkbox" value="u" {DAT_EOU_CHECKED}>
        u&nbsp;
        <input type="checkbox" name="chbEOp" class="checkbox" value="p" {DAT_EOP_CHECKED}>
        p&nbsp;
        <input type="checkbox" name="chbEOn" class="checkbox" value="n" {DAT_EON_CHECKED}>
        n</td>
    </tr>
    <tr>
      <td>{LANG_ACTIVE}</td>
      <td colspan="2"><input name="chbActive" type="checkbox" class="checkbox" id="chbActive" value="1" {ACT_CHECKED}>
        <input name="modus" type="hidden" id="modus" value="{MODUS}">
        <input name="hidId" type="hidden" id="hidId" value="{DAT_ID}">
        <input name="hidLimit" type="hidden" id="hidLimit" value="{LIMIT}"></td>
      <td>{LANG_NOTIFFAILCRIT}</td>
      <td><input type="checkbox" name="chbNOo" class="checkbox" value="o" {DAT_NOO_CHECKED}>
        o&nbsp;
        <input type="checkbox" name="chbNOd" class="checkbox" value="d" {DAT_NOD_CHECKED}>
        d&nbsp;
        <input type="checkbox" name="chbNOu" class="checkbox" value="u" {DAT_NOU_CHECKED}>
        u&nbsp;
        <input type="checkbox" name="chbNOp" class="checkbox" value="p" {DAT_NOP_CHECKED}>
        p&nbsp;
        <input type="checkbox" name="chbNOn" class="checkbox" value="n" {DAT_NON_CHECKED}>
        n</td>
    </tr>
    <tr>
      <td><img src="{IMAGE_PATH}pixel.gif" alt="" width="140" height="1"></td>
      <td><img src="{IMAGE_PATH}pixel.gif" alt="" width="120" height="1"></td>
      <td><img src="{IMAGE_PATH}pixel.gif" alt="" width="130" height="1"></td>
      <td><img src="{IMAGE_PATH}pixel.gif" alt="" width="120" height="1"></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td colspan="2"><input name="subForm" type="button" id="subForm" value="{LANG_SAVE}" onClick="LockButton()">&nbsp;
      <input name="subAbort" type="button" id="subAbort" onClick="abort()" value="{LANG_ABORT}"></td>
      <td>{LANG_MUSTDATA}</td>
      <td colspan="2"><span class="dbmessage">{WARNING}</span></td>
    </tr>
  </table>
</form>
<!-- END datainsert -->