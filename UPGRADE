*******************************************************************************
*                                                                             *
*                   NagiosQL - Upgrade Instructions                      *
*                                                                             *
*******************************************************************************

Upgrade from RC1 to RC2
=======================

1. Save your settings.ini file

2. Delete your old nagiosQL directory

3. Unpack the new distribution to your web directory

4. Restore the settings.ini file

5. Add this two directives to the [path] section of your settings.ini file and
   change the "physical" parameter to the correct value:
; Absolute (physical) path to the software directory
physical	= /path/to/your/nagiosQL/
; Used web technology (http or https)
protocol	= http

6. Update the database using this sql commands:
ALTER TABLE tbl_contact CHANGE contact_name contact_name VARCHAR(40) NOT NULL,
  CHANGE alias alias VARCHAR(120) NOT NULL;
ALTER TABLE tbl_contactgroup CHANGE contactgroup_name contactgroup_name VARCHAR(40) NOT NULL,
  CHANGE alias alias VARCHAR(120) NOT NULL;
ALTER TABLE tbl_host CHANGE host_name host_name VARCHAR(255) NOT NULL,
  CHANGE alias alias VARCHAR(120) NOT NULL,
  CHANGE address address VARCHAR(255) NOT NULL,
  CHANGE parents parents TEXT DEFAULT NULL,
  CHANGE hostgroups hostgroups TEXT DEFAULT NULL;
ALTER TABLE tbl_hostextinfo CHANGE host_name host_name VARCHAR(255) NOT NULL;
ALTER TABLE tbl_hostgroup CHANGE alias alias VARCHAR(120) NOT NULL,
  CHANGE hostgroup_name hostgroup_name VARCHAR(120) NOT NULL,
  CHANGE members members TEXT NOT NULL;
ALTER TABLE tbl_serviceextinfo CHANGE host_name host_name VARCHAR(255) NOT NULL;
ALTER TABLE tbl_servicegroup CHANGE servicegroup_name servicegroup_name VARCHAR(120) NOT NULL ,
  CHANGE alias alias VARCHAR(120) NOT NULL ,
  CHANGE members members TEXT NOT NULL;
ALTER TABLE tbl_timeperiod CHANGE alias alias VARCHAR(120) NOT NULL; 
INSERT INTO tbl_submenu (id_main,order_id,item,link,rights) VALUES (6,4,'item_admsub23','admin/cgicfg.php','admin2');
UPDATE tbl_submenu SET order_id=5 WHERE item='item_admsub19';

7. Use the new version :)


Upgrade from RC2 to RC3
=======================

1. Backup your settings.ini file

2. Delete your old nagiosQL directory

3. Unpack the new distribution to your web directory

4. Restore the settings.ini file

5. Add the location of your nagios pidfile to your old settings.ini:
  ; Nagios PID File (look at file_lock in your nagios.cfg)
  pidfile = "/var/run/nagios.pid"
  
6. Update the database using this sql commands:
ALTER TABLE tbl_contact CHANGE host_notification_commands host_notification_commands TEXT DEFAULT NULL,
  CHANGE service_notification_commands service_notification_commands TEXT DEFAULT NULL;

  
  Upgrade from any V1.00 to V2.00-P00
=======================================

1. Save your settings.ini file

2. Delete your old nagiosQL directory

3. Unpack the new distribution to your web directory

4. Install the new database using nagiosQL_v2_db_mysql.sql

5. Fill in the settings to the new setting.ini file by hand 
   (look at the old values from Version 1.00)

6. Database upgrade
   There is _no_ upgrade path from your old to the new database
   Import your old configuration files with the import function to the new database
   Note, that inactive objects must be inserted by hand because there are not written 
         to the config files

7. Use the new version :)



  Special Upgrade from V2.00-BETA to V2.00-P00
================================================

1. Save your settings.ini file

2. Delete your old nagiosQL directory

3. Unpack the new distribution to your web directory

4. Database upgrade
   Connect to your NagiosQL 2.00-BETA Database and run this SQL command:
INSERT INTO `tbl_language` (`id`, `version`, `category`, `keyword`, `lang_de`, `lang_en`, `lang_xy`) VALUES
(450, '2.00', 'file', 'write_monitoring_data', 'Schreibe alle Überwachungskonfigurationen:', 'Write all monitoring configurations:', NULL),
(451, '2.00', 'file', 'write_additional_data', 'Schreibe alle Zusatzkonfigurationen:', 'Write all additional configurations:', NULL);

5. Use the new version


 Upgrade from 2.00-P00 to 2.0.2
================================================

1. Save your settings.ini file

2. Delete your old nagiosQL directory

3. Unpack the new distribution to your web directory

4. Database upgrade
linux# mysql -p < config/nagiosQL_v2_db_mysql_update_2.0.0-2.0.2.sql

5. Use the new version

 Upgrade from 2.0.1 to 2.0.2
================================================

1. Just replace functions/prepend_adm.php 

2. That's it - now really use the new version